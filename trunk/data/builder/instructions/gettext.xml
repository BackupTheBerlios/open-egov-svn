<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<!-- $Id$ -->

<pack name="gettext" license="GPLv3">
  <meta>
    <homepage>http://www.gnu.org/software/gettext/</homepage>
    <download>http://ftp.gnu.org/pub/gnu/gettext/</download>
    <descriptions>
      <description lang="en" type="short">GNU gettext</description>
      <description lang="en" type="long">GNU gettext</description>
      <description lang="de" type="short">GNU gettext</description>
      <description lang="de" type="long">GNU gettext</description>
    </descriptions>
    <keywords>gettext, localization, internationalization, i10n, i18n</keywords>
  </meta>

  <comments>
    <comment date="" author="">When compiling gettext 0.16.1, an error may occur:

./localename.c:1145: error: duplicate case value
./localename.c:1144: error: previously used here
./localename.c:1359: error: duplicate case value
./localename.c:1358: error: previously used here
./localename.c:1367: error: duplicate case value
./localename.c:1366: error: previously used here

You have to open the file localename.c and replace the constant names directly by their corresponding values (0x00, 0x01):

Example:
      case /*SUBLANG_BENGALI_INDIA*/0x00: return "bn_IN";
      case /*SUBLANG_BENGALI_BANGLADESH*/0x01: return "bn_BD";
</comment>
  </comments>

  <set version="0.18.3.2" date="2014-01-07" state="works">
    <flags>
      <flag name="libpth"
            required="no"
            standard="no"
            imports="libpth"
            para-if-pos="--with-libpth-prefix=${OEG_BASE_DIR}"
            para-if-neg="--without-libpth-prefix"
            info=""  />
      <flag name="libiconv"
            required="yes"
            standard="yes"
            imports="libiconv"
            para-if-pos="--with-libiconv-prefix=${OEG_BASE_DIR}"
            para-if-neg="--without-libiconv-prefix"
            info="Needed for character set conversion of PO files from/to Unicode."  />
      <flag name="libunistring"
            required="no"
            standard="no"
            imports="libunistring"
            para-if-pos="--with-libunistring-prefix=${OEG_BASE_DIR}"
            para-if-neg="--without-libunistring-prefix"
            info="Needed for the line breaking in PO files and for xgettext. If not present, a subset of libunistring (included in this package) will be compiled into libgettextlib."  />
            <!-- --with-included-libunistring -->
      <flag name="libxml2"
            required="no"
            standard="no"
            imports="libxml2"
            para-if-pos="--with-libxml2-prefix=${OEG_BASE_DIR}"
            para-if-neg="--without-libxml2-prefix"
            info="Needed for the --color option of the various programs. If not present, a subset of libxml2 (included in this package) will be compiled into libgettextlib." />
            <!-- --with-included-libxml or ..-libxml2? -->
      <flag name="ncurses"
            required="no"
            standard="no"
            imports="ncurses"
            para-if-pos="--with-libncurses-prefix=${OEG_BASE_DIR} --without-libtermcap-prefix"
            para-if-neg="--disable-curses --without-libncurses-prefix --without-libtermcap-prefix"
            info="Needed for the --color option of the 'msgcat' program. Highly recommended. GNU ncurses (preferred) or libtermcap (discouraged) or a curses library (legacy)." />
    </flags>

    <downloads>
      <download file="gettext-0.18.3.2.tar.gz">
        <url type="direct" checked="2014-01-09">http://ftp.gnu.org/pub/gnu/gettext/gettext-0.18.3.2.tar.gz</url>
        <hash type="CRC32"></hash>
        <hash type="MD5"></hash>
        <hash type="SHA1"></hash>
        <hash type="SHA512"></hash>
        <hash type="RIPEMD256"></hash>
        <size>16.189.249</size>
      </download>
    </downloads>

<!--
  --disable-openmp        do not use OpenMP
  --disable-acl           do not support ACLs
  --disable-curses        do not use libncurses, libtermcap even if they exist
  --with-included-gettext use the GNU gettext library included here
  --with-libintl-prefix[=DIR]  search for PACKLIBS in DIR/include and DIR/lib
  --without-libintl-prefix     don't search for PACKLIBS in includedir and libdir
  --with-included-glib    use the glib2 included here
  --with-libglib-2.0-prefix[=DIR]  search for PACKLIBS in DIR/include and DIR/lib
  --without-libglib-2.0-prefix     don't search for PACKLIBS in includedir and libdir
  --with-included-libcroco  use the libcroco included here
  --with-libcroco-0.6-prefix[=DIR]  search for PACKLIBS in DIR/include and DIR/lib
  --without-libcroco-0.6-prefix     don't search for PACKLIBS in includedir and libdir
  --with-libncurses-prefix[=DIR]  search for PACKLIBS in DIR/include and DIR/lib
  --without-libncurses-prefix     don't search for PACKLIBS in includedir and libdir
  --with-libtermcap-prefix[=DIR]  search for PACKLIBS in DIR/include and DIR/lib
  --without-libtermcap-prefix     don't search for PACKLIBS in includedir and libdir
  --with-libxcurses-prefix[=DIR]  search for PACKLIBS in DIR/include and DIR/lib
  --without-libxcurses-prefix     don't search for PACKLIBS in includedir and libdir
  --with-libcurses-prefix[=DIR]  search for PACKLIBS in DIR/include and DIR/lib
  --without-libcurses-prefix     don't search for PACKLIBS in includedir and libdir
  --without-included-regex     don't compile regex; this is the default on systems
                          with recent-enough versions of the GNU C Library
                          (use with caution on other systems).
  --with-libexpat-prefix[=DIR]  search for PACKLIBS in DIR/include and DIR/lib
  --without-libexpat-prefix     don't search for PACKLIBS in includedir and libdir
  --without-emacs         do not use Emacs, don't install po-mode
  --with-lispdir          override the default lisp directory
  --without-git           don't use git to compress the infrastructure archive
  --with-cvs              use cvs to compress the infrastructure archive
                          (deprecated)
  --without-bzip2         don't use bzip2 to compress the infrastructure archive
  --without-xz            don't use xz to compress the infrastructure archive
-->
    <commands>
PACKAGE_NAME=gettext
PACKAGE_VERSION=0.18.3.2

oegimport libiconv
oegextract ${PACKAGE_NAME}
configure --prefix=${OEG_BASE_DIR} --with-gnu-ld --enable-relocatable --disable-rpath --with-libiconv-prefix=${OEG_BASE_DIR} --with-sysroot=${OEG_BASE_DIR} --bindir=${OEG_BASE_BIN_DIR} --libdir=${OEG_BASE_LIB_DIR} ${CONFIGURE_HOST_PARA} --without-emacs
make
make install DESTDIR=${OEG_INSTALL_DIR}

cd "${OEG_INSTALL_DIR}${OEG_BASE_DIR}"
<if64bits>
mv bin/*.dll bin64/
rm -rf bin
# TODO: Do we need to edit the .la files in lib64?
</if64bits>
oegarchive ${PACKAGE_NAME}-${PACKAGE_VERSION}
    </commands>
  </set>
</pack>

