<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<!-- $Id$ -->

<pack name="libxslt" license="">
  <meta>
    <homepage>http://xmlsoft.org/XSLT/</homepage>
    <download>http://xmlsoft.org/sources/</download>
    <descriptions>
      <description lang="en" type="short">XSLT C library developed for the GNOME project</description>
      <description lang="en" type="long">Libxslt is the XSLT C library developed for the GNOME project. XSLT itself is a an XML language to define transformations for XML. Libxslt is based on libxml2 the XML C library developed for the GNOME project. It also implements most of the EXSLT set of processor-portable extensions functions and some of Saxon's evaluate and expressions extensions. People can either embed the library in their application or use xsltproc the command line processing tool.</description>
      <description lang="de" type="short"></description>
      <description lang="de" type="long"></description>
    </descriptions>
    <keywords>libxslt, xsl</keywords>
  </meta>

  <comments>
  </comments>

  <set version="1.1.28" date="2012-11-21" state="works">
    <flags>
      <required>libxml2</required>
      <optional></optional>
      <recommended></recommended>
    </flags>

    <downloads>
      <download file="libxslt-1.1.28.tar.gz">
        <url type="direct" checked="2013-07-22">http://xmlsoft.org/sources/libxslt-1.1.28.tar.gz</url>
        <hash type="CRC32"></hash>
        <hash type="MD5"></hash>
        <hash type="SHA1"></hash>
        <hash type="SHA512"></hash>
        <hash type="RIPEMD256"></hash>
        <size></size>
      </download>
    </downloads>

    <commands>
export PACKAGE_NAME=libxslt
export PACKAGE_VERSION=1.1.28
oegenv 32
oegcleanbase
oegimport libiconv-1.14
oegimport gettext-0.18.3
oegimport zlib-1.2.8
oegimport libxml2-2.9.1   # important
oegextract libxslt-1.1.28.tar.gz

# config.status: executing libtool commands
# /bin/rm: cannot lstat `libtoolT': No such file or directory
# Edit the configure file, find the line which contains $RM "$cfgfile", and replace it with $RM -f "$cfgfile".
# The "-f" tells rm that it shouldn't stop even if the file doesn't exists.
# Maybe you can ignore the error because it is nearly at the last command
# and the important stuff was already done at this point.

oegpatch 001

# make in /work/libxslt-1.1.28/libxslt:
# security.c: In function 'xsltCheckWritePath':
# security.c:346:3: error: too many arguments to function 'mkdir'
#    ret = mkdir(directory, 0755);

oegpatch 002

configure --with-libxml-prefix=${OEG_BASE_DIR} --with-libxml-include-prefix=${OEG_BASE_DIR}/include --with-libxml-libs-prefix=${OEG_BASE_DIR}/lib --prefix=${OEG_BASE_DIR}
make
make install-strip DESTDIR=${OEG_INSTALL_DIR}
cd "${OEG_INSTALL_DIR}${OEG_BASE_DIR}"
oegarchive libxslt-1.1.28
    </commands>
  </set>
</pack>

