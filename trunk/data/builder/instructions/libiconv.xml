<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<!-- $Id$ -->

<pack name="libiconv" license="">
  <meta>
    <homepage>http://www.gnu.org/software/libiconv/</homepage>
    <download>http://ftp.gnu.org/pub/gnu/libiconv/</download>
    <descriptions>
      <description lang="en" type="short">GNU libiconv</description>
      <description lang="en" type="long">GNU libiconv</description>
      <description lang="de" type="short">GNU libiconv</description>
      <description lang="de" type="long">GNU libiconv</description>
    </descriptions>
    <keywords>localization, internationalization, i10n, i18n</keywords>
  </meta>

  <comments>
  </comments>

  <set version="1.14" date="2011-08-07" state="works">
    <flags>
      <required></required>
      <optional>gettext</optional>
      <standard>gettext</standard>
    </flags>

    <options>
      <option name="gettext" import-if-pos="gettext"
              para-if-pos="--with-libintl-prefix=${OEG_BASE_DIR}"
              para-if-neg="--without-libintl-prefix" />
    </options>

    <downloads>
      <download file="libiconv-1.14.tar.gz">
        <url type="direct" checked="2013-07-19">http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.14.tar.gz</url>
        <hash type="CRC32"></hash>
        <hash type="MD5"></hash>
        <hash type="SHA1"></hash>
        <hash type="SHA512"></hash>
        <hash type="RIPEMD256"></hash>
        <size>4984397</size>
      </download>
    </downloads>

<!--
cd ${WORKDIR}/libiconv-1.14-32
#configure --host=i686 --build=i686 --prefix=${BASEDIR} -–enable-shared
#mit Angabe von --host oder --build werden mit dem Qt5-MinGW keine DLLs erzeugt.
configure --prefix=${BASEDIR} -–enable-shared
# ./configure --host=x86_64-w64-mingw32
# this will simply build and install the DLL
# a further step is required in order to get the static library as well.
# make distclean
# ./configure --host=x86_64-w64-mingw32 --disable-shared
# make install-strip
make
make install
-->

    <commands>
oegenv 32
oegcleanbase
# if option given:
# oegimport libiconv-1.14    # maybe needed by gettext binaries
# oegimport gettext-0.18.3
oegextract libiconv-1.14.tar.gz
# --enable-relocatable doesn't work:
#../srclib/libicrt.a(progreloc.o):progreloc.c:(.text+0x156): undefined reference to `compute_curr_prefix'
#../srclib/libicrt.a(progreloc.o):progreloc.c:(.text+0x168): undefined reference to `set_relocation_prefix'
configure --prefix=${OEG_BASE_DIR} --enable-shared --with-gnu-ld
make
#make install DESTDIR=/tmp/inst$$
make install-strip DESTDIR=${OEG_INSTALL_DIR}
cd "${OEG_INSTALL_DIR}${OEG_BASE_DIR}"
oegarchive libiconv-1.14
    </commands>
  </set>
</pack>

